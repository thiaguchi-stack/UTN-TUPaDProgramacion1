#2. Leer y mostrar productos: Crear un programa que abra productos.txt, lea cada línea, la procese con .strip() y .split(",")

#Se abre el archivo txt
with open("productos.txt", "r") as archivo:
    next(archivo,None)#Salta la primera linea del archivo
    for linea in archivo:
        partes = linea.strip().split(",")#Separa los elemetos del del texto por cada ","
        print(f"Nombre: {partes[0]}|Precio: {partes[1]}|Cantidad: {partes[2]}")
#3. Agregar productos desde teclado: Modificar el programa para que luego de mostrar los productos, le pida al usuario que ingrese un nuevo producto (nombre, precio, cantidad) y lo agregue al archivo sin borrar el contenido existente.
with open("productos.txt", "a") as archivo:
    archivo.write("\n" + input("Ingrese un nuevo producto (nombre,precio,cantidad):"))
#4. Cargar productos en una lista de diccionarios: Al leer el archivo, cargar los datos enuna lista llamada productos, donde cada elemento sea un diccionario con claves: nombre, precio, cantidad.
with open("productos.txt", "r") as archivo:
    next(archivo,None)#Salta la primera linea del archivo
    productos = []#Se crea una lista  para los diccionarios
    for linea in archivo:
        partes = linea.strip().split(",")#Separa los elemetos del del texto por cada ","
        diccionario = {"nombre":partes[0],"precio":partes[1],"cantidad":partes[2]}#Los elementos van a las claves correspondientes
        productos.append(diccionario)
    print(productos)
#5. Buscar producto por nombre: Pedir al usuario que ingrese el nombre de un producto. Recorrer la lista de productos y, si lo encuentra, mostrar todos sus datos. Si no existe, mostrar un mensaje de error.
buscar = input("Ingrese el nombre del producto que desea buscar: ")
encontrado = False
for producto in productos:
    if buscar.lower() in producto['nombre'].lower():
        print(f"Nombre: {producto['nombre']}, Precio: {producto['precio']}, Cantidad: {producto['cantidad']}")
        encontrado = True
if not encontrado:
    print("El producto ingresado no fue encontrado")
#6. Guardar los productos actualizados: Después de haber leído, buscado o agregado productos, sobrescribir el archivo productos.txt escribiendo nuevamente todos los productos actualizados desde la lista.
with open("productos.txt", "w") as archivo:
    archivo.write("nombre,precio,cantidad\n")
    for producto in productos:
        linea = f"{producto['nombre']},{producto['precio']},{producto['cantidad']}\n"
        archivo.write(linea)